\documentclass[12pt, a4paper, twoside]{book}

\title{Computable characterisations of stochastic uncertainty in differential equations}
\author{Liam Blake}
\date{\today}
\def\degree{Master of Philosophy}
\def\discipline{Applied Mathematics}


\usepackage{thesis}

% \RequirePackage[authoryear,sort,comma]{natbib}
% \setcitestyle{authoryear,aysep={}}
% TODO: Need to ensure that all names are written out fully, so don't have to set uniquename.
% e.g. if the bibliography includes A. Stuart and Andrew Stuart, the two names will be written out in FULL when citing.
\RequirePackage[
	backend=biber,
	natbib,
	style=authoryear-comp,
	maxcitenames=2,
	mincitenames=1,
	maxbibnames=4,
	minbibnames=3,
	giveninits=true,
	uniquename=init,
	sorting=ynt,
	date=year
]{biblatex}

% Ensure initials are always listed first
\DeclareNameAlias{sortname}{first-last}

% Fix to link the name as well in citations - https://tex.stackexchange.com/questions/15951/hyperlink-name-with-biblatex-authoryear-biblatex-1-4b/27107#27107
% \DeclareFieldFormat{citehyperref}{%
%   \DeclareFieldAlias{bibhyperref}{noformat}% Avoid nested links
%   \bibhyperref{#1}}

% \DeclareFieldFormat{textcitehyperref}{%
%   \DeclareFieldAlias{bibhyperref}{noformat}% Avoid nested links
%   \bibhyperref{%
%     #1%
%     \ifbool{cbx:parens}
%       {\bibcloseparen\global\boolfalse{cbx:parens}}
%       {}}}

% \savebibmacro{cite}
% \savebibmacro{textcite}

% \renewbibmacro*{cite}{%
%   \printtext[citehyperref]{%
%     \restorebibmacro{cite}%
%     \usebibmacro{cite}}}

% \renewbibmacro*{textcite}{%
%   \ifboolexpr{
%     ( not test {\iffieldundef{prenote}} and
%       test {\ifnumequal{\value{citecount}}{1}} )
%     or
%     ( not test {\iffieldundef{postnote}} and
%       test {\ifnumequal{\value{citecount}}{\value{citetotal}}} )
%   }
%     {\DeclareFieldAlias{textcitehyperref}{noformat}}
%     {}%
%   \printtext[textcitehyperref]{%
%     \restorebibmacro{textcite}%
%     \usebibmacro{textcite}}}

\bibliography{thesis}


% \includeonly{chp07_outlook/outlook,appendix/epidemiology}

\begin{document}
% \emergencystretch 3em

\include{frontmatter}

% Frontmatter
\include{front/abstract}
\include{front/statement}
\include{front/acknowledgements}
% \include{front/dedication}

\mainmatter

% Chapters
\include{chp01_introduction/introduction}
\include{chp02_background/background}
\include{chp03_paper_theory/theory}
\include{chp04_paper_numerics/numerics}
\include{chp05_gmm/gmm}
\include{chp06_applications/applications}
\include{chp07_outlook/outlook}

% Appendices
\appendix
\include{appendix/sde_theory}
% \include{appendix/bene_calculations}
\include{appendix/epidemiology}


\backmatter
% Add the bibliography to the table of contents
% \addcontentsline{toc}{chapter}{Bibliography}

% What style to use and what file to use for the bibliography
% \bibliographystyle{abbrvnat}
% \bibliography{thesis}
\printbibliography[heading=bibintoc]

\end{document}
